/*!
 * Strudel.js v0.8.1
 * (c) 2016-2018 Mateusz ≈Åuczak
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.Strudel={})}(this,function(t){"use strict";var a=function(t,e,n){console.error(t)},e=function(){this._registry={}};e.prototype.getData=function(){return this._registry},e.prototype.getRegisteredSelectors=function(){return Object.keys(this._registry)},e.prototype.getComponent=function(t){return this._registry[t]},e.prototype.registerComponent=function(t,e){this._registry[t],this._registry[t]=e};var s=new e,i={initializedClassName:"strudel-init",devtools:!1,productionTip:!1},c=function(t){return"function"==typeof t||!1},n=function(o){return function(n){return function(t,e){t.__decorators__||(t.__decorators__=[]),t.__decorators__.push(function(t){return o(t,e,n)})}}},r={},o=function(){};o.getEvents=function(){return r},o.removeAllListeners=function(){Object.keys(r).forEach(function(t){delete r[t]})},o.prototype.$on=function(t,e){r[t]||(r[t]=[]),r[t].push(e)},o.prototype.$off=function(t,o){var e=r[t];if(e&&e.length){var n=e.reduce(function(t,e,n){return c(e)&&e===o?t=n:t},-1);if(-1<n)return e.splice(n,1),r[t]=e,!0}return!1},o.prototype.$emit=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var o=r[t];if(o&&o.length){try{o.forEach(function(t){t.apply(void 0,e)})}catch(t){a(t,this.constructor)}return!0}return!1};var u=function(r){function t(t){var o=this;void 0===t&&(t={});var e=t.element,n=t.data;r.call(this);try{this.beforeInit(),this.$element=e,this.$data=n,this.__decorators__&&(this.__decorators__.forEach(function(t){t(o)}),delete this.__decorators__),this.mixins&&this.mixins.length&&this.mixins.forEach(function(t){var e,n;c(t.init)&&t.init.call(o),e=o,n=t,Object.keys(n).forEach(function(t){e[t]||(e[t]=n[t])})}),this.init()}catch(t){a(t,this.constructor)}this.$element.addClass(i.initializedClassName)}return r&&(t.__proto__=r),((t.prototype=Object.create(r&&r.prototype)).constructor=t).prototype.beforeInit=function(){},t.prototype.init=function(){},t.prototype.beforeDestroy=function(){},t.prototype.destroy=function(){},t.prototype.$teardown=function(){try{this.beforeDestroy(),this.$element.off(),this.$element.removeClass(i.initializedClassName),delete this.$element.first().scope,delete this.$element,this.destroy()}catch(t){a(t,this.constructor)}},t}(o),f=function(t,e){if(!t.prototype)return t;var n,o,r,i,c=function(n){function t(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];n.apply(this,t)}return n&&(t.__proto__=n),(t.prototype=Object.create(n&&n.prototype)).constructor=t}(u);return n=t,o=c.prototype,r=n.prototype,i="object"==typeof n?n:new n,Object.getOwnPropertyNames(i).forEach(function(t){var e=Object.getOwnPropertyDescriptor(i,t);e.writable=!0,Object.defineProperty(o,t,e)}),Object.getOwnPropertyNames(r).forEach(function(t){"constructor"!==t&&Object.defineProperty(o,t,Object.getOwnPropertyDescriptor(r,t))}),Object.defineProperty(c.prototype,"_selector",{value:e}),Object.defineProperty(c.prototype,"isStrudelClass",{value:!0}),Object.defineProperty(c,"name",{value:t.name}),s.registerComponent(e,c),c};function p(e){return function(t){return f(t,e)}}var l=/^(\S+)\s*(.*)$/,h=n(function(n,o){for(var r=[],t=arguments.length-2;0<t--;)r[t]=arguments[t+2];r[0];var e,i,c,s,u=r[0].match(l);e=n.$element,i=u[1],c=u[2],s=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{n[o].apply(this,t)}catch(t){a(t,n.constructor)}r[1]&&t[0].preventDefault()}.bind(n),c?e.on(i,c,s):e.on(i,s)}),d=n(function(t,e){for(var n=[],o=arguments.length-2;0<o--;)n[o]=arguments[o+2];n[0],t[e]=t.$element.find(n[0])}),y=n(function(o,r){var i=o.init||function(){};o.init=function(){for(var t,e=[],n=arguments.length;n--;)e[n]=arguments[n];return(t=o[r]).apply.apply(t,[this].concat(e)),i.apply.apply(i,[this].concat(e))}}),m={"/^\\.[\\w\\-]+$/":function(t){return document.getElementsByClassName(t.substring(1))},"/^\\w+$/":function(t){return document.getElementsByTagName(t)},"/^\\#[\\w\\-]+$/":function(t){return document.getElementById(t.substring(1))},"/^</":function(t){return(new _).generate(t)}},g=function(t,e){return(e||document).querySelectorAll(t)},v={events:function(t,e){if(t._e)for(var n in t._e)t._e[n].forEach(function(t){new _(e).on(n,t)})},select:function(t,e){new _(t).is("select")&&(e.value=t.value)},textarea:function(t,e){new _(t).is("textarea")&&(e.value=t.value)}},_=function t(e,n){if(e instanceof t)return e;"string"==typeof e&&(e=function(t,e){if(t=t.replace(/^\s*/,"").replace(/\s*$/,""),e)return g(t,e);for(var n in m)if(e=n.split("/"),new RegExp(e[1],e[2]).test(t))return m[n](t);return g(t)}(e,n)),(e&&e.nodeName||e&&e===window)&&(e=[e]),this._nodes=this.slice(e)},b={length:{configurable:!0}};function w(t,e){return new _(t,e)}b.length.get=function(){return this._nodes.length},_.prototype.array=function(r){var i=this;return this._nodes.reduce(function(t,e,n){var o;return r?((o=r.call(i,e,n))||(o=!1),"string"==typeof o&&(o=new _(o)),o instanceof _&&(o=o._nodes)):o=e.innerHTML,t.concat(!1!==o?o:[])},[])},_.prototype.str=function(e,n){return function(t){return"function"==typeof t?t.call(this,e,n):t.toString()}},_.prototype.is=function(t){return 0<this.filter(t).length},_.prototype.filter=function(e){var t=function(t){return t.matches=t.matches||t.msMatchesSelector||t.webkitMatchesSelector,t.matches(e||"*")};return"function"==typeof e&&(t=e),e instanceof _&&(t=function(t){return-1!==e._nodes.indexOf(t)}),new _(this._nodes.filter(t))},_.prototype.eq=function(t){return new _(this._nodes[t])||!1},_.prototype.get=function(t){return(t||0===t)&&t<=this._nodes.length?this._nodes[t]:this._nodes},_.prototype.first=function(){return this._nodes[0]||!1},_.prototype.slice=function(t){return t&&0!==t.length&&"string"!=typeof t&&"[object Function]"!==t.toString()?t.length?[].slice.call(t._nodes||t):[t]:[]},_.prototype.unique=function(){return new _(this._nodes.reduce(function(t,e){return null!=e&&!1!==e&&-1===t.indexOf(e)?t.concat(e):t},[]))},_.prototype.children=function(t){return this.map(function(t){return this.slice(t.children)}).filter(t)},_.prototype.generate=function(t){return/^\s*<t(h|r|d)/.test(t)?new _(document.createElement("table")).html(t).children()._nodes:/^\s*</.test(t)?new _(document.createElement("div")).html(t).children()._nodes:document.createTextNode(t)},_.prototype.args=function(t,e,n){return"function"==typeof t&&(t=t(e,n)),"string"!=typeof t&&(t=this.slice(t).map(this.str(e,n))),t.toString().split(/[\s,]+/).filter(function(t){return t.length})},_.prototype.each=function(t){return this._nodes.forEach(t.bind(this)),this},_.prototype.eacharg=function(n,o){return this.each(function(e,t){this.args(n,e,t).forEach(function(t){o.call(this,e,t)},this)})},_.prototype.isInPage=function(t){return t!==document.body&&document.body.contains(t)},_.prototype.map=function(t){return t?new _(this.array(t)).unique():this},_.prototype.adjacent=function(i,t,n){return"number"==typeof t&&(t=0===t?[]:new Array(t).join().split(",").map(Number.call,Number)),this.each(function(o,r){var e=document.createDocumentFragment();new _(t||{}).map(function(t,e){var n="function"==typeof i?i.call(this,t,e,o,r):i;return"string"==typeof n?this.generate(n):new _(n)}).each(function(t){this.isInPage(t)?e.appendChild(new _(t).clone().first()):e.appendChild(t)}),n.call(this,o,e)})},_.prototype.getAll=function(t){return new _([t].concat(new _("*",t)._nodes))},_.prototype.clone=function(){return this.map(function(t){var e=t.cloneNode(!0),o=this.getAll(e);return this.getAll(t).each(function(t,e){for(var n in v)v[n](t,o._nodes[e])}),e})},_.prototype.html=function(e){return void 0===e?this.first().innerHTML||"":this.each(function(t){t.innerHTML=e})},_.prototype.text=function(e){return void 0===e?this.first().textContent||"":this.each(function(t){t.textContent=e})},_.prototype.remove=function(){return this.each(function(t){t.parentNode.removeChild(t)})},_.prototype.parent=function(t){return this.map(function(t){return t.parentNode}).filter(t)},_.prototype.closest=function(e){return this.map(function(t){do{if(new _(t).is(e))return t}while((t=t.parentNode)&&t!==document)})},_.prototype.append=function(t,e){return this.adjacent(t,e,function(t,e){t.appendChild(e)})},_.prototype.prepend=function(t,e){return this.adjacent(t,e,function(t,e){t.insertBefore(e,t.firstChild)})},_.prototype.find=function(e){return this.map(function(t){return new _(e||"*",t)})},_.prototype.addClass=function(t){return this.eacharg(arguments,function(t,e){t.classList.add(e)})},_.prototype.toggleClass=function(t){return this.eacharg(arguments,function(t,e){t.classList.toggle(e)})},_.prototype.removeClass=function(t){return this.eacharg(arguments,function(t,e){t.classList.remove(e)})},_.prototype.on=function(t,e,o){if("string"==typeof e){var r=e;e=function(e){var n=arguments,t=new _(e.currentTarget);(t.is(r)?t:t.find(r)).each(function(t){if(t===e.target||t.contains(e.target)){try{Object.defineProperty(e,"currentTarget",{get:function(){return t}})}catch(t){}o.apply(t,n)}})}}var n=function(t){return e.apply(this,[t].concat(t.detail||[]))};return this.eacharg(t,function(t,e){t.addEventListener(e,n),t._e=t._e||{},t._e[e]=t._e[e]||[],t._e[e].push(n)})},_.prototype.off=function(t){return void 0===t&&this.each(function(e){for(var n in e._e)e._e[n].forEach(function(t){e.removeEventListener(n,t)})}),this.eacharg(t,function(e,n){new _(e._e?e._e[n]:[]).each(function(t){e.removeEventListener(n,t)})})},_.prototype.trigger=function(t){var r=this.slice(arguments).slice(1);return this.eacharg(t,function(t,e){var n,o={bubbles:!0,cancelable:!0,detail:r};try{n=new window.CustomEvent(e,o)}catch(t){(n=document.createEvent("CustomEvent")).initCustomEvent(e,!0,!0,r)}t.dispatchEvent(n)})},_.prototype.attr=function(n,t,o){if(o=o?"data-":"",void 0!==t){var e=n;(n={})[e]=t}return"object"==typeof n?this.each(function(t){for(var e in n)null!==n[e]?t.setAttribute(o+e,n[e]):t.removeAttribute(o+e)}):this.length?this.first().getAttribute(o+n):""},_.prototype.prop=function(n,t){if(void 0!==t){var e=n;(n={})[e]=t}return"object"==typeof n?this.each(function(t){for(var e in n)t[e]=n[e]}):this.length?this.first()[n]:""},_.prototype.data=function(t,e){return t?this.attr(t,e,!0):this.first().dataset},Object.defineProperties(_.prototype,b);var E="0.8.1",O=i,C={components:s.getData()},j=Object.freeze({version:E,options:C,config:O,EventEmitter:o,Component:p,Evt:h,El:d,OnInit:y,element:w,$:w}),N="."+i.initializedClassName,$=function(t){this.registry=t};$.prototype.unlink=function(n){void 0===n&&(n=document),this.registry.getRegisteredSelectors().forEach(function(t){var e=Array.prototype.slice.call(n.querySelectorAll(t));n!==document&&w(n).is(N)&&e.push(n),[].forEach.call(e,function(t){t.component&&t.component.$teardown()})})},$.prototype.link=function(e){var i=this;void 0===e&&(e=document),this.registry.getRegisteredSelectors().forEach(function(r){var t=Array.prototype.slice.call(e.querySelectorAll(r));e!==document&&w(e).is(r)&&t.push(e),[].forEach.call(t,function(t){if(!t.__strudel__){var e=w(t),n=e.data(),o=i.registry.getComponent(r);t.__strudel__=new o({element:e,data:n})}})})};var S,L,T=function(t,e){t.forEach(function(t){"childList"===t.type&&0<t.addedNodes.length&&e(t)})},A=function(t,e){t.forEach(function(t){"childList"===t.type&&0<t.removedNodes.length&&e(t)})},P={childList:!0,subtree:!0},x=function(t,e,n){new MutationObserver(function(t){n(t,e)}).observe(t,P)},D=window.__STRUDEL_DEVTOOLS_GLOBAL_HOOK__,I=new $(s),M=w(document),k=function(t){var e,n;I.link(((e=t)&&0<e.length&&(n=e[0]instanceof HTMLElement?e[0]:e[0].first()),n)),M.trigger("strudel:loaded")},R=function(t){var n=s.getRegisteredSelectors();Array.prototype.slice.call(t.addedNodes).filter(function(t){return"SCRIPT"!==t.nodeName&&1===t.nodeType}).forEach(function(e){n.find(function(t){return w(e).is(t)||w(e).find(t).length})&&k([e])})},q=function(t){var e="."+i.initializedClassName;Array.prototype.slice.call(t.removedNodes).filter(function(t){return"SCRIPT"!==t.nodeName&&1===t.nodeType&&w(t).is(e)}).forEach(function(t){I.unlink(t)})};u.prototype.getInstance=function(){return j},/comp|inter|loaded/.test(document.readyState)?setTimeout(k,0):M.on("DOMContentLoaded",k),setTimeout(function(){i.devtools&&D&&D.emit("init",j)},0),M.on("content:loaded",function(t){k(t.detail)}),S=M._nodes[0],x(S,R,T),L=M._nodes[0],x(L,q,A),t.version=E,t.options=C,t.config=O,t.EventEmitter=o,t.Component=p,t.Evt=h,t.El=d,t.OnInit=y,t.element=w,t.$=w,Object.defineProperty(t,"__esModule",{value:!0})});